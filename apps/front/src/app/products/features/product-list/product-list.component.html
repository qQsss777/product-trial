<h1 class="text-center">Liste des produits</h1>

<p-button
  label="CrÃ©er produit"
  (onClick)="onCreate()"
  class="block text-center"
/>

<p-dataView [value]="products()">
  <ng-template pTemplate="list" let-items>
    <div class="overflow-y-auto" style="max-height: 70vh; width: 100%">
      <div
        class="grid"
        style="
          grid-template-columns: repeat(3, 1fr);
          justify-content: space-between;
          column-gap: 2rem;
          row-gap: 2rem;
          width: 100%;
        "
      >
        @for (product of items; track product.id) {

        <p-card [style]="{ width: '25rem', overflow: 'hidden' }">
          <ng-template pTemplate="header">
            <img class="w-full" [src]="product.image" alt="Card" />
          </ng-template>

          <ng-template pTemplate="title">
            {{ product.name }}
          </ng-template>

          <ng-template pTemplate="subtitle">
            {{ product.category }}
          </ng-template>

          <p>{{ product.description }}</p>

          <ng-template pTemplate="footer">
            <div class="flex gap-3 mt-1">
              <p-button
                label="Modifier"
                severity="secondary"
                (onClick)="onUpdate(product)"
              />
              <p-button
                label="Supprimer"
                severity="danger"
                (onClick)="onDelete(product)"
              />
            </div>
          </ng-template>
        </p-card>

        }
      </div>
    </div>
  </ng-template>
</p-dataView>

<p-dialog
  [(visible)]="isDialogVisible"
  [style]="{ width: '50vw' }"
  header="Ajout/Edition produit"
>
  <app-product-form
    [product]="editedProduct()"
    (save)="onSave($event)"
    (cancel)="onCancel()"
  />
</p-dialog>
